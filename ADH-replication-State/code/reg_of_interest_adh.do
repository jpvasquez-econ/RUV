***********************************************
* Impact of Chinese Imports on Local Labor Markets
***********************************************
/*
In this code, we calculate the regressions of interest from Tables 4, 5 and 7 
of ADH (2013) at the State Level. 

Input file: 

1. data/2-final_data/workfile_china_agg.dta Final dataset at the state level
*/


***********************************************
* Administrative Commands
***********************************************
use ../data/2-final_data/workfile_china_agg.dta, clear
gen t2=(year==2000)
******************************************************************************************************************************************************************************************
* Table 4: Population Change
******************************************************************************************************************************************************************************************
* Panel C
******************************************************************************************************************************************************************************************
* Column 1
******************************************************************************************************************************************************************************************

ivregress 2sls lnchg_popworkage (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp l_sh_popedu_c l_sh_popfborn l_sh_empl_f l_sh_routine33 l_task_outsource reg* t2 [aw=timepwt48], robust

ivregress 2sls lnchg_popworkage (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp reg* t2 [aw=timepwt48] 

******************************************************************************************************************************************************************************************
* Table 5: Change in Employment, Unemployment and Non-Employment
******************************************************************************************************************************************************************************************
* Panel B
******************************************************************************************************************************************************************************************
* Column 3
******************************************************************************************************************************************************************************************

ivregress 2sls d_sh_unempl (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp l_sh_popedu_c l_sh_popfborn l_sh_empl_f l_sh_routine33 l_task_outsource reg* t2 [aw=timepwt48], robust

ivregress 2sls d_sh_unempl (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp reg* t2 [aw=timepwt48] 

******************************************************************************************************************************************************************************************
* Column 4
******************************************************************************************************************************************************************************************

ivregress 2sls d_sh_nilf (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp l_sh_popedu_c l_sh_popfborn l_sh_empl_f l_sh_routine33 l_task_outsource reg* t2 [aw=timepwt48], robust

ivregress 2sls d_sh_nilf (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp reg* t2 [aw=timepwt48] 

******************************************************************************************************************************************************************************************
* Table 7: Manufacturing vs. Non-Manufacturing
******************************************************************************************************************************************************************************************
* Panel B
******************************************************************************************************************************************************************************************
* Column 1
******************************************************************************************************************************************************************************************

ivregress 2sls d_avg_lnwkwage_mfg (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp l_sh_popedu_c l_sh_popfborn l_sh_empl_f l_sh_routine33 l_task_outsource reg* t2 [aw=timepwt48], robust

ivregress 2sls d_avg_lnwkwage_mfg (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp reg* t2 [aw=timepwt48] 

******************************************************************************************************************************************************************************************
* Column 4
******************************************************************************************************************************************************************************************

ivregress 2sls d_avg_lnwkwage_nmfg (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp l_sh_popedu_c l_sh_popfborn l_sh_empl_f l_sh_routine33 l_task_outsource reg* t2 [aw=timepwt48], robust

ivregress 2sls d_avg_lnwkwage_nmfg (d_tradeusch_pw=d_tradeotch_pw_lag) l_shind_manuf_cbp reg* t2 [aw=timepwt48] 
